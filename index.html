<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Daily Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, sans-serif;
      margin: 0 auto;
      padding: 20px;
      background-color: #fdf8f3;
      max-width: 700px;
      color: #333;
    }
    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }
    .container {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .task-item {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
    .task-item input[type="checkbox"] {
      margin-right: 10px;
      transform: scale(1.3);
    }
    button {
      padding: 10px 15px;
      margin: 10px 5px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }
    button:hover { background-color: #3e8e41; }
    #clearBtn { background-color: #f44336; }
    #clearBtn:hover { background-color: #d32f2f; }
    .history-item {
      background: #eef6fa;
      padding: 12px;
      border-radius: 5px;
      margin-bottom: 15px;
    }
    canvas {
      margin-top: 30px;
    }
    @media (max-width: 600px) {
      body { padding: 10px; }
      button { width: 100%; margin: 8px 0; }
    }
  </style>
</head>
<body>
  <h1>ðŸ’ª My Daily Tracker</h1>
  <div class="container">
    <div id="tasksContainer"></div>
    <button onclick="saveProgress()">Save Progress</button>
    <button id="clearBtn" onclick="clearProgress()">Clear All Progress</button>

    <h2>ðŸ“Š Progress History</h2>
    <div id="history"></div>
    <canvas id="progressChart"></canvas>
  </div>

  <script>
    const TASKS = [
      "Japanese Practice for 15 min",
      "Spanish Practice for 15 min",
      "Chinese Practice",
      "Drawing Practice",
      "Sketch for 15 min",
      "SQL Practice",
      "Chess Puzzle (1 game)",
      "Coding Practice",
      "Learn Unreal Engine",
      "3D Practice"
    ];

    const STORAGE_KEY = "dailyProgressLog";
    let chart;

    function getToday() {
      return new Date().toISOString().split("T")[0];
    }

    function setupTasks() {
      const container = document.getElementById("tasksContainer");
      container.innerHTML = "";
      TASKS.forEach(task => {
        const div = document.createElement("div");
        div.className = "task-item";
        div.innerHTML = `
          <input type="checkbox" id="${task}" />
          <label for="${task}">${task}</label>
        `;
        container.appendChild(div);
      });
    }

    function saveProgress() {
      const today = getToday();
      const checkboxes = document.querySelectorAll("input[type='checkbox']");
      const taskStatus = {};

      checkboxes.forEach(cb => {
        const task = cb.nextElementSibling.textContent;
        taskStatus[task] = cb.checked;
      });

      let progressLog = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
      progressLog[today] = taskStatus;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(progressLog));

      alert("âœ… Progress saved!");
      loadProgress();
    }

    function clearProgress() {
      if (confirm("Are you sure you want to clear all progress?")) {
        localStorage.removeItem(STORAGE_KEY);
        alert("âœ… All progress cleared!");
        location.reload();
      }
    }

    function loadProgress() {
      const progressLog = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
      const today = getToday();
      const todayData = progressLog[today] || {};

      // Update checkboxes
      document.querySelectorAll("input[type='checkbox']").forEach(cb => {
        const task = cb.nextElementSibling.textContent;
        cb.checked = todayData?.[task] || false;
      });

      renderHistory(progressLog);
    }

    function renderHistory(progressLog) {
      const history = document.getElementById("history");
      history.innerHTML = "";

      const labels = [];
      const percentages = [];

      Object.entries(progressLog).forEach(([date, tasks]) => {
        const completed = Object.values(tasks).filter(Boolean).length;
        const percent = Math.round((completed / TASKS.length) * 100);

        const div = document.createElement("div");
        div.className = "history-item";
        div.innerHTML = `<strong>${date}</strong> â€“ ${completed}/${TASKS.length} tasks completed (${percent}%)`;
        history.appendChild(div);

        labels.push(date);
        percentages.push(percent);
      });

      renderChart(labels, percentages);
    }

    function renderChart(labels, data) {
      const ctx = document.getElementById("progressChart").getContext("2d");
      if (chart) chart.destroy();

      chart = new Chart(ctx, {
        type: "bar",
        data: {
          labels,
          datasets: [{
            label: "% Complete",
            data,
            backgroundColor: "rgba(75,192,192,0.5)",
            borderColor: "rgba(75,192,192,1)",
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              max: 100
            }
          },
          plugins: {
            legend: { display: false }
          }
        }
      });
    }

    // Init
    setupTasks();
    loadProgress();
  </script>
</body>
</html>
